{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "Vega-Lite version of bar chart from https://observablehq.com/@d3/learn-d3-scales.",
    "width": 600,
    "height": 350,
    "config": {
      "background":"#FFF3E2",
      "view": {"stroke": "transparent"},
      "axis": {"grid": false}
    },
    "data": {
      "values": [
        {"name": "ğŸ‡«ğŸ‡®", "value": 7.804},
        {"name": "ğŸ‡©ğŸ‡°", "value": 7.586},
        {"name": "ğŸ‡®ğŸ‡¸", "value": 7.53},
        {"name": "ğŸ‡®ğŸ‡±", "value": 7.473},
        {"name": "ğŸ‡³ğŸ‡±", "value": 7.403},
        {"name": "ğŸ‡¸ğŸ‡ª", "value": 7.395},
        {"name": "ğŸ‡³ğŸ‡´", "value": 7.315},
        {"name": "ğŸ‡¨ğŸ‡­", "value": 7.24},
        {"name": "ğŸ‡±ğŸ‡º", "value": 7.228},
        {"name": "ğŸ‡³ğŸ‡¿", "value": 7.123}
      ]
    },
    "transform": [
        {
          "calculate": "{'ğŸ‡«ğŸ‡®': 'Finland', 'ğŸ‡©ğŸ‡°': 'Denmark', 'ğŸ‡®ğŸ‡¸': 'Iceland', 'ğŸ‡®ğŸ‡±': 'Israel', 'ğŸ‡³ğŸ‡±': 'Netherlands', 'ğŸ‡¸ğŸ‡ª': 'Sweden', 'ğŸ‡³ğŸ‡´': 'Norway', 'ğŸ‡¨ğŸ‡­': 'Switzerland', 'ğŸ‡±ğŸ‡º': 'Luxembourg', 'ğŸ‡³ğŸ‡¿': 'New Zealand'}[datum.name]",
          "as": "country"
        }
      ],
    "encoding": {
      "y": {"field": "name", "type": "nominal", "sort": "-x", "title": null},
      "x": {"field": "value", "type": "quantitative", "title": null}
    },
    "layer": [{
      "mark": "bar",
      "encoding": {
        "color": {
          "field": "value",
          "type": "quantitative",
          "title": "Hapiness Score",
          "scale": {
            "type": "ordinal",
            "range": ["#ffe7e7","#ffdbdb","#ffcece","#ffbbbb", "#ff9e9e", "#FB928E"]
          } 
        },
        "tooltip": [
            {"field": "country", "type": "nominal", "title":"Country"},
            {"field": "value", "type": "quantitative", "title": "Happiness Score"}
        ]
      }
    }, {
      "mark": {
        "type": "text",
        "align": "right",
        "xOffset": -9,
        "aria": false
      },
      "encoding": {
        "text": {"field": "value", "type": "quantitative"},
        "color": {
          "condition": {
            "test": {"field": "value", "gt": 10},
            "value": "white"
          },
          "value": "black"
        }
      }
    }]
}
